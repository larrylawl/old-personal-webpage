I"$<h2 id="the-problem">The problem</h2>

<p>Why am I getting an <code class="highlighter-rouge">UnboundLocalError</code> when my variable has a value?</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x = 10
def foo():
    print(x)
    x += 1

foo()
</code></pre></div></div>

<p>(Skip to the documentation directly <a href="https://docs.python.org/3/faq/programming.html">here</a>.
Read on if you don’t understand the docs)</p>

<h2 id="the-explanation">The explanation</h2>

<p>This explanation from the docs clears things up:</p>

<blockquote>
  <p>In Python, variables that are only referenced inside a function are implicitly global.
If a variable is assigned a value anywhere within the function’s body, it’s assumed to be a local unless explicitly
declared as global.</p>
</blockquote>

<p>Line 2 is implemented so as to prevent programmers from unintentionally manipulating the value of global variables.</p>

<h2 id="the-solution">The solution</h2>

<p>Use the <code class="highlighter-rouge">global</code> keyword. This explicit declaration tells python (and yourself) that you are referencing the
<code class="highlighter-rouge">global</code> variable.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x = 10
def foo():
    global x
    print(x)
    x += 1

foo()
</code></pre></div></div>

<p>Use the <code class="highlighter-rouge">nonlocal</code> keyword. <code class="highlighter-rouge">nonlocal</code> causes the listed identifier to refer to <em>previously bound variables</em> in
the <em>nearest enclosing scope excluding globals</em>. Note that <code class="highlighter-rouge">for-loops</code> in Python do not create a local scope (unlike Java).
Docs <a href="https://docs.python.org/3/reference/simple_stmts.html#grammar-token-nonlocal-stmt">here</a></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def foo():
    x = 10
    def bar():
        nonlocal x
        print(x)
        x += 1
    bar()
    print(x)
foo()
</code></pre></div></div>
:ET